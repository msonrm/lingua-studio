# Lingua Studio

**「意味から文を組み立てる」英語学習ツール**

ブロックを組み合わせて英文を生成。動詞の結合価（valency）に基づき、文法的に正しい文だけが作れる。

## 特徴

- **動詞は関数** - 動詞を選ぶと必要なスロット（主語・目的語等）が決まる
- **視覚的な文法理解** - ブロックの組み立てで英文構造を体感
- **Grammar Console** - 文法変換ルールをリアルタイム表示（run → runs の理由がわかる）
- **LinguaScript** - 生成AIにコピペできる中間表現

## LinguaScript - 生成AI時代の「意味論的インターフェース」
- Lingua Studioの心臓部であるLinguaScriptは、自然言語と機械語の間に位置する「意味の中間表現（Interlingua）」です。
- **ハルシネーションの排除:** 曖昧な自然言語ではなく、論理構造を直接AIに渡すことで、100%正確な翻訳・コード生成を可能にします。
- **普遍文法（UG）の実装:** 動詞の結合価（Valency）を核とした設計により、英語だけでなく多言語への「意味を保った変換」を保証します。

## アーキテクチャ概念図

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                            Lingua Studio                                     │
│                                                                              │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────────────────────┐  │
│  │   Blockly   │      │     AST     │      │        Compilers            │  │
│  │   ブロック   │ ───▶ │   抽象構文木  │ ───▶ │                             │  │
│  │   エディタ   │      │             │      │  ┌─────────────────────┐    │  │
│  └─────────────┘      └─────────────┘      │  │ English Compiler    │    │  │
│                                             │  │ "I ate an apple."   │    │  │
│                                             │  └─────────────────────┘    │  │
│                                             │             │               │  │
│                                             │  ┌─────────────────────┐    │  │
│                                             │  │ LinguaScript Output │    │  │
│                                             │  │ sentence(past+simple│    │  │
│                                             │  │ (eat(agent:'I,      │    │  │
│                                             │  │  theme:'apple)))    │    │  │
│                                             │  └─────────────────────┘    │  │
│                                             └─────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────────────────┘

                    将来の拡張性
                         │
     ┌───────────────────┼───────────────────┐
     │                   │                   │
     ▼                   ▼                   ▼
┌─────────┐       ┌─────────┐       ┌─────────┐
│日本語    │       │バスク語  │       │ドイツ語  │
│Compiler │       │Compiler │       │Compiler │
│         │       │         │       │         │
│私はリンゴ│       │Sagar bat│       │Ich aß   │
│を食べた。│       │jan nuen.│       │einen    │
│         │       │         │       │Apfel.   │
└─────────┘       └─────────┘       └─────────┘

════════════════════════════════════════════════════════════════════════════════

                    生成AIとの連携

┌─────────────────┐                      ┌─────────────────┐
│   Human / AI    │                      │   Human / AI    │
│                 │                      │                 │
│ 「昨日りんごを   │                      │ LinguaScript    │
│  食べた」       │                      │ Parser（将来）   │
│  （曖昧）       │                      │                 │
└────────┬────────┘                      └────────┬────────┘
         │                                        │
         │  曖昧な自然言語                          │  厳密な構文解析
         │  → ハルシネーションの可能性               │  → 100%正確な解釈
         ▼                                        ▼
┌─────────────────┐                      ┌─────────────────┐
│    生成AI       │                      │    生成AI       │
│  🤔 解釈が複数   │                      │  ✓ 意味が一意   │
│   可能...       │                      │   確定！        │
└─────────────────┘                      └─────────────────┘

  sentence(past+simple(eat(agent:'I, theme:'apple)))
                         │
                         │ LinguaScriptは「意味の座標」
                         │ → AIが迷わず正確に処理
                         ▼
              ┌─────────────────────────┐
              │  翻訳・要約・コード生成  │
              │  すべて厳密に実行可能    │
              └─────────────────────────┘
```

### 設計の要点

| レイヤー | 役割 |
|---------|------|
| **Blockly** | 視覚的なブロック操作で文を組み立てる |
| **AST** | ブロックの配置を抽象構文木として内部表現 |
| **English Compiler** | ASTから英文を生成（現在実装済み） |
| **LinguaScript** | 言語中立な中間表現（Interlingua） |
| **多言語Compiler** | 同じASTから日本語・バスク語等を生成（将来拡張） |
| **LinguaScript Parser** | 逆方向：LinguaScript → AST（将来拡張） |

### LinguaScript Parserが実現する未来

```
┌────────────────────────────────────────────────────────────────┐
│  Human writes LinguaScript                                     │
│  sentence(past+simple(eat(agent:'I, theme:'apple)))           │
│                              │                                 │
│                              ▼                                 │
│                      ┌──────────────┐                         │
│                      │ LinguaScript │                         │
│                      │    Parser    │                         │
│                      └──────┬───────┘                         │
│                              │                                 │
│                              ▼                                 │
│                         ┌────────┐                            │
│                         │  AST   │                            │
│                         └────┬───┘                            │
│                              │                                 │
│          ┌───────────────────┼───────────────────┐            │
│          ▼                   ▼                   ▼            │
│    ┌──────────┐       ┌──────────┐       ┌──────────┐        │
│    │ English  │       │ Japanese │       │  Basque  │        │
│    │ I ate an │       │ 私はリンゴ │       │ Sagar bat│        │
│    │ apple.   │       │ を食べた。 │       │ jan nuen.│        │
│    └──────────┘       └──────────┘       └──────────┘        │
│                                                                │
│  → AIと人間が「厳密な言語」で会話できる                          │
│  → 翻訳ミス・解釈違いが原理的に発生しない                        │
└────────────────────────────────────────────────────────────────┘
```

https://youtu.be/3Og3MxC2kj0?si=4w616F4xu80UnT1a

## 開発

```bash
npm install
npm run dev
```
